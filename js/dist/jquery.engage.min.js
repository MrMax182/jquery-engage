(function(t,e,n){function o(e,n){this.element=e,this.options=t.extend({},a,n),this._defaults=a,this._name=i,this.init()}var i="engage",a={offset:0,contents:["comment","share","newsletter"]};o.prototype={init:function(){this.loadContent(),this.loadScroller()},allContent:[],loadContent:function(){var o=this,i="column"+this.options.contents.length,a=this.getTimes(),s=t(o.element);this.distanceTop=s.offset().top+s.height()-t(e).height()/2-100+this.options.offset,t(n).on("click.engage","#footerEngageContainer .btn_x",function(){return o.hideFull(),!1}),t.each(this.options.contents,function(e,n){var s=t.engage.contents;if(s[n]&&s[n].init){s[n].options=t.extend({},s[n].defaults,o.options[n]);var r=t(s[n].init(a)).addClass(i);o.allContent.push(r)}})},loadScroller:function(){var n=this;t(e).on("scroll.engage",function(){t(e).scrollTop()>n.distanceTop?n.show():n.hide()})},getTimes:function(){var t=new Date,e=t.getHours(),n="";return n=10>e?"morning":20>e?"defaults":"night"},show:function(){if(!t("#footerEngageContainer").length){var e="containerColumn"+this.options.contents.length,o=t(this.getHTML(e)),i=this;t.each(this.allContent,function(t,e){o.find("#footerEngage").append(e),t!==i.allContent.length-1&&o.find("#footerEngage").append("<div class='separator'></div>")}),t("body").append(o),t("#footerEngage").animate({marginTop:0}),t(n).trigger("engage.show")}},hideFull:function(){this.noshow=!0,this.destroy(),this.hide()},hide:function(){return t("#footerEngageContainer").length?(t("#footerEngage").animate({marginTop:205},function(){t(n).trigger("engage.hide"),t("#footerEngageContainer").remove()}),undefined):!1},getHTML:function(t){var e="<div id='footerEngageContainer'>                    <div id='footerEngage' class='"+t+"'>                        <a href='#' class='btn_x'>&#215;</a>                    </div>                </div>";return e},destroy:function(){t(n).trigger("engage.destroy"),t(n).off("click.engage"),t(e).off("scroll.engage")}},t[i]={contents:{}},t.fn[i]=function(e){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new o(this,e))})}})(jQuery,window,document),$.engage.contents.comment={defaults:{url:"/wp-comments-post.php",mode:"",text:{defaults:{title:"Have your say!",thanks:"Thank you for contributing, your comment will be added shortly."},morning:{title:"Morning! Want to comment?",thanks:"Thank you for contributing, your comment will be added shortly."},night:{title:"Have your say!",thanks:"Thank you for contributing, your comment will be added shortly."}}},init:function(t){return this.loadEvents(),this.getHTML(this.options,t)},loadEvents:function(){var t=this;$(document).on("focus.engage","#footerCommentForm textarea",function(){t.showFields()}),$(document).on("submit.engage","#footerCommentForm",function(){return t.postData(),!1}),$(document).on("engage.destroy",function(){t.destroy()}),$(document).on("engage.hide",function(){$(".hideFooterComment").hide()})},destroy:function(){$(document).off("submit.engage"),$(document).off("focus.engage")},showFields:function(){$(".hideFooterComment").slideDown(),$("#footerEngageContainer, #footerEngage").animate({height:380})},postData:function(){$("#footerCommentForm").find("[name=comment_post_ID]").val($("#comment_post_ID").val()),$("#footerCommentForm").find("[name=comment_parent]").val($("#comment_parent").val());var t=$("#footerCommentForm").serialize();$.ajax({url:this.options.url,type:"POST",dataType:"html",data:t,success:function(){$("#footerCommentForm").hide(),$("#footerEngageContainer .thankyou").show(),$("#footerEngageContainer, #footerEngage").animate({height:200})},error:function(){}})},getHTML:function(t,e){var n="<div class='comments'>                    <div class='commentsTitle'>"+t.text[e].title+"</div>                    <form id='footerCommentForm' method='post' action='"+t.url+"'>                        <textarea class='text' name='comment' placeholder='Add your comment'></textarea>                        <div class='hideFooterComment' style='display:none;'>                            <label>Name</label><br />                            <input type='text' class='text' name='author' />                            <label>Email</label><br />                            <input type='text' class='text' name='email' />                            <input type='hidden' name='comment_post_ID' value=''>                            <input type='hidden' name='comment_parent' value=''>                        </div>                        <button class='btn btn-warning' type='submit'>Send comment</button>                    </form>                    <div class='thankyou' style='display:none; font-style:italic; color:#555;'>"+t.text[e].thanks+"</div>                </div>";return n}},$.engage.contents.newsletter={defaults:{url:"",text:{defaults:{title:"Liked this article? <span>Get more content right in your mailbox</span>"},morning:{title:"Need more caffeine? <span>Get more content right in your mailbox</span>"},night:{title:"Doing some overtime? <span>Get more content right in your mailbox</span>"}}},init:function(t){return this.loadEvents(),this.getHTML(this.options,t)},loadEvents:function(){var t=this;$(document).on("engage.destroy",function(){return t.destroy(),!1})},destroy:function(){$(document).off("submit.engage")},post:function(){var t=$("#footerCommentForm").serialize();$.ajax({url:this.options.commentUrl,type:"POST",dataType:"html",data:t,success:function(){},error:function(){}})},getHTML:function(t,e){var n="<div class='newsletter'>                    <div class='newsletterTitle'>"+t.text[e].title+"</div>                    <form id='footerNewsletterForm' method='post' action='"+t.url+"'>                        <input type='text' name='email' class='text' placeholder='Email'>                        <input type='hidden' name='goto' value='' />                        <input type='hidden' name='iehack' value='&#9760;' />                        <button class='btn  btn-warning' type='submit'>Subscribe</button>                    </form>                </div>";return n}},$.engage.contents.share={defaults:{url:"",buttons:["linkedin","facebook","twitter","reddit"],title:"",text:{defaults:{title:"Help us by sharing this article"},morning:{title:"Help us by sharing this article"},night:{title:"Help us by sharing this article"}}},init:function(t){this.loadEvents(),this.options.title=this.options.title?this.options.title:encodeURIComponent(document.title),this.options.url=this.options.url?this.options.url:encodeURIComponent(location.href);var e=$(this.getHTML(this.options,t));return $.each(this.options.buttons,function(t,n){var o=".share-"+n;e.find(o).css({display:"inline-block"})}),e},loadEvents:function(){var t=this;$(document).on("engage.destroy",function(){t.destroy()})},destroy:function(){$(document).off("submit.engage")},getHTML:function(t,e){var n="<div class=''>                    <div class='socialTitle'>"+t.text[e].title+"</div>                    <div class='share-container'>                        <a class='share-buttons share-linkedin' style='display:none;' onclick='window.open(\"http://www.linkedin.com/cws/share?title="+t.title+"&token=&isFramed=true&lang=en_US&url="+t.url+"\",\"sharer\",\"toolbar=0,status=0,width=548,height=325\");' href='javascript: void(0)'>Share</a>                        <a class='share-buttons share-facebook' style='display:none;' onclick='window.open(\"http://www.facebook.com/sharer.php?t="+t.title+"&u="+t.url+"\",\"sharer\",\"toolbar=0,status=0,width=548,height=325\");' href='javascript: void(0)'>Share</a>                        <a class='share-buttons share-twitter' style='display:none;' onclick='window.open(\"https://twitter.com/intent/tweet?text="+t.title+" "+t.url+"\",\"sharer\",\"toolbar=0,status=0,width=548,height=325\");' href='javascript: void(0)'>Share</a>                        <a class='share-buttons share-reddit' style='display:none;' href='javascript: void(0)' onclick='window.open(\"http://www.reddit.com/submit?v=5&noui&jump=close&url="+t.url+"&title="+t.title+'", "delicious","toolbar=no,width=910,height=700"); return false;\'>reddit</a>                    </div>                </div>';return n}};