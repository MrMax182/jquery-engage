(function(t,e,n){function o(e,n){this.element=e,this.options=t.extend({},a,n),this._defaults=a,this._name=i,this.init()}var i="engage",a={offset:0,contents:["comment","newsletter"]};o.prototype={init:function(){this.loadContent(),this.loadScroller()},allContent:[],loadContent:function(){var o=this,i="column"+this.options.contents.length,a=this.getTimes(),s=t(o.element);this.distanceTop=s.offset().top+s.height()-t(e).height()/2-100+this.options.offset,t(n).on("click.engage","#footerEngageContainer .btn_x",function(){return o.hideFull(),!1}),t.each(this.options.contents,function(e,n){var s=t.engage.contents;if(s[n]&&s[n].init){s[n].options=t.extend({},s[n].defaults,o.options[n]);var r=t(s[n].init(a)).addClass(i);o.allContent.push(r)}})},loadScroller:function(){var n=this;t(e).on("scroll.engage",function(){t(e).scrollTop()>n.distanceTop?n.show():n.hide()})},getTimes:function(){var t=new Date,e=t.getHours(),n="";return n=10>e?"morning":20>e?"defaults":"night"},show:function(){if(t("#footerEngageContainer").length)return!1;var e=t(this.getHTML()),n=this;t.each(this.allContent,function(t,o){e.find("#footerEngage").append(o),t!==n.allContent.length-1&&e.find("#footerEngage").append("<div class='separator'></div>")}),t("body").append(e),t("#footerEngage").animate({marginTop:0})},hideFull:function(){this.noshow=!0,this.destroy(),this.hide()},hide:function(){return t("#footerEngageContainer").length?(t("#footerEngage").animate({marginTop:205},function(){t("#footerEngageContainer").remove()}),undefined):!1},getHTML:function(){return"<div id='footerEngageContainer'>                    <div id='footerEngage'>                        <a href='#' class='btn_x'>&#215;</a>                    </div>                </div>"},destroy:function(){t(n).trigger("engage.destroy"),t(n).off("click.engage"),t(e).off("scroll.engage")}},t[i]={contents:{}},t.fn[i]=function(e){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new o(this,e))})}})(jQuery,window,document),$.engage.contents.comment={defaults:{url:"/wp-comments-post.php",mode:"",text:{defaults:{title:"Have your say!",thanks:"Thank you for contributing, your comment will be added shortly."},morning:{title:"Morning! Have some opinions on this article?",thanks:"Thank you for contributing, your comment will be added shortly."},night:{title:"Have your say!",thanks:"Thank you for contributing, your comment will be added shortly."}}},init:function(t){return this.loadEvents(),this.getHTML(this.options,t)},loadEvents:function(){var t=this;$(document).on("focus.engage","#footerCommentForm textarea",function(){t.showFields()}),$(document).on("submit.engage","#footerCommentForm",function(){return t.postData(),!1}),$(document).on("engage.destroy",function(){return t.destroy(),!1})},destroy:function(){$(document).off("submit.engage"),$(document).off("focus.engage")},showFields:function(){$(".hideFooterComment").slideDown(),$("#footerEngageContainer, #footerEngage").animate({height:380})},postData:function(){$("#footerCommentForm").find("[name=comment_post_ID]").val($("#comment_post_ID").val()),$("#footerCommentForm").find("[name=comment_parent]").val($("#comment_parent").val());var t=$("#footerCommentForm").serialize();$.ajax({url:this.options.url,type:"POST",dataType:"html",data:t,success:function(){$("#footerCommentForm").hide(),$("#footerEngageContainer .thankyou").show(),$("#footerEngageContainer, #footerEngage").animate({height:200})},error:function(){}})},getHTML:function(t,e){return"<div class='comments'>                    <div class='commentsTitle'>"+t.text[e].title+"</div>                    <form id='footerCommentForm' method='post' action='"+t.url+"'>                        <textarea class='text' name='comment' placeholder='Add your comment'></textarea>                        <div class='hideFooterComment' style='display:none;'>                            <label>Name</label><br />                            <input type='text' class='text' name='author' />                            <label>Email</label><br />                            <input type='text' class='text' name='email' />                            <input type='hidden' name='comment_post_ID' value=''>                            <input type='hidden' name='comment_parent' value=''>                        </div>                        <button class='btn btn-warning' type='submit'>Send comment</button>                    </form>                    <div class='thankyou' style='display:none; font-style:italic; color:#555;'>"+t.text[e].thanks+"</div>                </div>"}},$.engage.contents.newsletter={defaults:{url:"",text:{defaults:{title:"Liked this article? <span>Get more content right in your mailbox</span>"},morning:{title:"Need more coffeine? <span>Get more content right in your mailbox</span>"},night:{title:"Doing some overtime? <span>Get more content right in your mailbox</span>"},weekend:{commentTitle:"Have your say!"}}},init:function(t){return this.loadEvents(),this.getHTML(this.options,t)},loadEvents:function(){var t=this;$(document).on("engage.destroy",function(){return t.destroy(),!1})},destroy:function(){$(document).off("submit.engage")},post:function(){var t=$("#footerCommentForm").serialize();$.ajax({url:this.options.commentUrl,type:"POST",dataType:"html",data:t,success:function(){},error:function(){}})},getHTML:function(t,e){return"<div class='newsletter'>                    <div class='newsletterTitle'>"+t.text[e].title+"</div>                    <form id='footerNewsletterForm' method='post' action='"+t.url+"'>                        <input type='text' name='email' class='text' placeholder='Email'>                        <input type='hidden' name='goto' value='' />                        <input type='hidden' name='iehack' value='&#9760;' />                        <button class='btn  btn-warning' type='submit'>Subscribe</button>                    </form>                </div>"}},$.engage.contents.share={init:function(){}};